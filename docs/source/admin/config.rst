..  GENERATED FILE, DO NOT EDIT DIRECTLY

    This file is automatically generated using https://codeberg.org/slidge/legacy-module-template/
    Its source is at:
    https://codeberg.org/slidge/legacy-module-template/src/branch/main/docs/source/admin/config.rst.jinja
    Open a pull request for this repository instead, to benefit the documentation of all slidge-based gateways.

.. _config:

Configuration
=============

.. _config-file:

Config file location
********************

By default, slidge-whatsapp uses all config files found in ``/etc/slidge/conf.d/*``.
You can change this using the ``SLIDGE_CONF_DIR`` env var, eg ``SLIDGE_CONF_DIR=/path/dir1:/path/dir2:/path/dir3``.

It is recommended to use ``/etc/slidge/conf.d/`` to store configuration options
common to all slidge components (eg, attachment handling, logging options,
etc.), and to specify a plugin-specific file on startup, eg:

.. code-block:: bash

    slidge -c /etc/slidge/superduper.conf

Optional dependencies
---------------------

WhatsApp requires that image, audio, and video attachments are sent in
specific formats; these formats are generaly incompatible with prevailing
standards across XMPP clients.

Thus, sending attachments with full client compatibility requires that we
convert these on-the-fly; this requires that FFmpeg is installed. If a
valid FFmpeg installation is not found, attachments will still be sent in
their original formats, which may cause these to appear as "document"
attachments in official WhatsApp clients.

FFmpeg is widely used and packaged -- please refer to your distribution's
documentation on how to install the FFmpeg package.

slidge-whatsapp-specific config
*******************************

slidge-whatsapp provides the component-wide options displayed in the table below.
They can be used:

* as ``key=value`` in a :ref:`config file <config-file>`;
* as command line arguments, prepended with ``--``, e.g., ``--some-option=value``;
* as environment variables, upper case, prepended with ``SLIDGE_WHATSAPP_``, and with dashes substituted with underscores, e.g., ``SLIDGE_WHATSAPP_SOME_OPTION=value``.

.. config-obj:: slidge_whatsapp.config

.. _generic-config:

Generic slidge config
*********************

.. warning::

    Because of an ugly mess that will soonâ„¢ be fixed, it is impossible to use
    the config file to turn off boolean arguments that are true by default.
    As a workaround, use CLI args instead, e.g., ``--some-opt=false``.

The following options can be used:

* as ``key=value`` in a :ref:`config file <config-file>`;
* as command line arguments, prepended with ``--``, e.g., ``--some-option=value``;
* as environment variables, upper case, prepended with ``SLIDGE_``,
  and with dashes substituted with underscores, e.g., ``SLIDGE_SOME_OPTION=value``.


.. note::

    The following options are for slidge version |slidge_version|.
    Depending on how you installed slidge-whatsapp, you might have a different version of slidge.
    Use ``slidge-whatsapp --help`` for the exact list of options you can use.


.. config-obj:: slidge.core.config


Advanced logging configuration
******************************

To customize the output of the slidge, you can use the command line argument ``--log-config``
to specify a `logging configuration file
<https://docs.python.org/3/library/logging.config.html#configuration-file-format>`_.
